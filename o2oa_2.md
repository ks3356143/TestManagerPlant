# O2OA-second part

## 一、流程图

### （1）散知识点

0、在表单默认值中，选择radiobutton等，可以直接`return '差旅报销'`或者在流程结构中this.workContext.getWork()找对应值

1、在“提交报销”中，**系统自动认定默认为拟稿人**，不配置流程数据

2、“部门领导审核”中，**在职务中配置“部门领导人员”关联部门正职选择**，直接在**“流程数据”选择字段选择表单中人员选择框**

3、“财务领导审批”中，这里选部门正职后，是哪个部门正职呢，**选择组织->“财务部”**

4、选择按钮不用配置，需要配置出去的两个路径配置出去脚本，其中parseFloat为Js函数转换为float，查询API文档，this.data为全表单数据，可以从表单Json浏览数据结构

`return parseFloat(this.data.datatable.total.amount) <=3000`

`return parseFloat(this.data.datatable.total.amount) >3000`

5、“箭头”的选择，设置箭头绑定，**选择身份->组织范围为拟稿人所在组织->直接所属组织->选择职务->部门正职**

6、“财务领导审核”环节，我们来默认它的处理人应该是财务部部门正职领导，可以直接在处理人环节选择到这个职务

7、**“提交报销”环节配置表单“报销申请表单”就好**，后面的环节可以配置也可以不配置，**如果没有配置表单就会沿用上一个环节的表单**

8、最后一步，增加给拟稿人发送待阅的功能，`return this.workContext.getWork().creatorIdentity;`

流程现在明白了吗，人员是表单查看人员，箭头设置的是继续流转的选择（里面添加人就是当前节点可以选择的人）

#### 1.必填项设置（表单-控件-校验）

-   通过配置-选择任何时候，值为空的话，设置提示；选择决策（即‘箭头’）如果输入‘同意’那么就是选择同意的时候必填

再例如报销明细是一个table，数据结构中有个数组，设置值长度不能为空即可

-   通过脚本-最终`return true`，不通过`return '报销明细不能为空'`

#### 2.移动端浏览效果

-   双击上tab打开全程，然后将app.html改为workmobilewithaction.html即可

#### 3.打印表单

-   在表单中关联上打印表单
-   要求：字段要对应、字段名称要一致，才能取到字段值（可以直接ctrl+c然后ctrl+v）

#### 4.流程图

-   当有2个箭头的时候默认选择“同意”，点击同意的箭头，显示高级属性-扩展-默认路由

#### 5.自动流转

-   在流程图-节点-**时效**-指定时长-如果工作时间后
-   时效-脚本去指定`return {workHour:5}`5个工作小时后自动流转，但是有2个箭头时候必须，点击箭头-扩展-活动超时时自动流转-选择是
-   **！！！**两个节点均是同一个人，还是选择**箭头-扩展-与上一个相同时候自动流转**



## 二、信息发布（规章制度、通知公告）

分为带审批和不带审批的信息发布

在主菜单->内容管理设置->新建栏目->（有2个表单，编辑表单是发布之前，阅读表单是发布之后）->新建分类

### 1）左侧包括八种设计元素

-   分类配置：栏目可以包含多种分类
-   表单配置：设计和开发流程中需要使用的表单
-   列表配置：列式内容管理中的业务数据
-   数据配置：设计和管理OA信息发布中需要使用的数据
-   脚本配置：设计和OA功能开发流程中需要调用的脚本
-   资源文件：提供OA信息发布模块中可以直接访问的固定的文档、图片，便于直接以URL方式访问
-   栏目属性：对应用的信息，权限进行管理和设定
-   查找设计：对平台中前端脚本进行搜索



### 2）发布表单重写

-   **“读者”控件**-如果没有选择人员，那么所有人有权限查看该文件；如果选择了特定人员，那么只有选择的人员才有权限查看该文件
-   注意移动端需要把控制条删掉



### 3）使用

-   按要求使用即可，使用网站https://www.o2oa.net/cms/junior/297.html



## 三、数据视图与统计





